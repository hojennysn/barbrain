<div ng-if="loading" ng-include="'partials/loading.html'"></div>

<h4 class="center">{{ $storage.sales[$storage.salesDate].totalSales | currency:undefined:0 }} / {{ $storage.goals[$storage.salesDate].value | currency:undefined:0 }}</h4>

<div class="chartHolder doughnutSize">
  <!-- <canvas id="myChart" width="200" height="200"></canvas> -->
  <canvas ng-if="$storage.goals[$storage.salesDate].value - $storage.sales[$storage.salesDate].totalSales > 0" id="doughnut" class="chart chart-doughnut"
    chart-data="[$storage.sales[$storage.salesDate].totalSales, $storage.goals[$storage.salesDate].value - $storage.sales[$storage.salesDate].totalSales]"  chart-labels="['Period Total Sales', 'Difference From Goal']" chart-options="options">
  </canvas> 
  <canvas ng-if="$storage.goals[$storage.salesDate].value - $storage.sales[$storage.salesDate].totalSales <= 0" id="doughnut" class="chart chart-doughnut"
    chart-data="[$storage.sales[$storage.salesDate].totalSales, $storage.sales[$storage.salesDate].totalSales - $storage.goals[$storage.salesDate].value ]"  chart-labels="['Period Total Sales', 'Amount Exceeding Goal']" chart-options="options">
  </canvas> 
</div>

<div class="center">
  <!-- <h4>Total Sales: {{ $storage.sales[getSalesDate()].totalSales | currency }}</h4> -->
  <!-- <span class="smallFont">{{$storage.sales[getSalesDate()].totalSales / $storage.dailyHardGoal * 100| number:0 }}% of goal achieved</span> <br> -->
  <span class="smallFont">{{$storage.sales[$storage.salesDate].totalSales / $storage.goals[$storage.salesDate].value * 100| number:0 }}% of goal achieved</span> <br>
  <br>
  <a data-toggle="modal" data-target="#myModal"><span class="smallFont" style="color:deepskyblue">Adjust goal</span></a>
</div>
  <br />
  <table class="dividerTable" ng-init="level = 0;">
    <tr class="smallFont bottomLine">
      <th ng-class="{'selected': level === 0}" ng-click="level = 0">Super Groups</th>
      <th ng-class="{'selected': level === 1}" ng-click="level = 1">Groups</th>
    </tr>
  </table>
  <br />
  
  <table class="dividerTable smallFont" ng-if="level === 0">  
    <thead>
      <tr class="tableEmployeeStat">
        <th>Super Group</th>
        <th>Sales</th>
        <th>Tickets</th>
        <th>% of Total Sales</th>
      </tr>
    </thead>
    <tbody>
      <tr class="tableEmployeeStat" ng-repeat="object in $storage.sales[$storage.salesDate].superGroups">
        <td>{{object.name}}</td>
        <td>{{object.sales | currency:undefined:0 }}</td>
        <td>{{object.count}}</td>
        <td>{{ (object.sales / $storage.sales[$storage.salesDate].totalSales) * 100 | number:0}}%</td>
      </tr>
  
    </tbody>
  </table>

  <table class="dividerTable smallFont" ng-if="level === 1">  
    <thead>
      <tr class="tableEmployeeStat">
        <th>Group</th>
        <th>Sales</th>
        <th>Tickets</th>
        <th>% of Total Sales</th>
      </tr>
    </thead>
    <tbody>
      <tr class="tableEmployeeStat" ng-repeat="object in $storage.sales[$storage.salesDate].groups">
        <td>{{object.name}}</td>
        <td>{{object.sales | currency:undefined:0 }}</td>
        <td>{{object.count}}</td>
        <td>{{ (object.sales / $storage.sales[$storage.salesDate].totalSales) * 100 | number:0}}%</td>
      </tr>
  
    </tbody>
  </table>

  <br />
  
  
<button class="smallRoundButton grayBKG" ng-click="loadSalesData(true)">Refresh Data</button>


<!-- Insights -->
<div class="tactics">
<br>
  <div class="center">
    <span class="smallFont"><b>Thought of the Day</b></span>
    <br>
    <br>
    <div class="boxed ">
      <span class="smallFont">{{$storage.fullTactics.tactics[0].tips.thoughtOfTheDay}}</span>
    </div>
  </div> <!-- End Insights -->
<br>
</div>

<!-- Modal -->
<div id="myModal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header headerBKG">
        <h4 class="modal-title center xlargeFont" style="color:white">{{section | capitalizeFirst}}'s Goal: {{$storage.goals[$storage.salesDate].value}}</h4>
      </div>
      <br>
      <div class="modal-body center tactics">
        <!-- <div ng-include="'partials/MVP/setSalesGoal.html'"></div> -->
      
      <span class="largeFont center">New Goal</span>
      <br>
        <input type="number" class="center" id="salesGoalInput" />
      </div>
      <div class="modal-footer headerBKG">
        <button type="button" class="btn btn-default" ng-click="callUpdateGoals()">Update</button>
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>

