<div ng-if="loading" ng-include="'partials/loading.html'"></div>

<h4 class="center">{{ $storage.sales[$storage.salesDate].totalSales | currency:undefined:0 }} / {{ $storage.goals[$storage.salesDate].value | currency:undefined:0 }}</h4>

<div class="chartHolder doughnutSize">
  <!-- <canvas id="myChart" width="200" height="200"></canvas> -->
  <canvas ng-if="$storage.goals[$storage.salesDate].value - $storage.sales[$storage.salesDate].totalSales > 0" id="doughnut" class="chart chart-doughnut"
    chart-data="[$storage.sales[$storage.salesDate].totalSales, $storage.goals[$storage.salesDate].value - $storage.lavuStaff.todayTotalSales]"  chart-labels="['Period Total Sales', 'Difference From Goal']" chart-options="options">
  </canvas> 
  <canvas ng-if="$storage.goals[$storage.salesDate].value - $storage.sales[$storage.salesDate].totalSales <= 0" id="doughnut" class="chart chart-doughnut"
    chart-data="[$storage.sales[$storage.salesDate].totalSales, $storage.sales[$storage.salesDate].totalSales - $storage.goals[$storage.salesDate].value ]"  chart-labels="['Period Total Sales', 'Amount Exceeding Goal']" chart-options="options">
  </canvas> 
</div>

<div class="center">
  <!-- <h4>Total Sales: {{ $storage.sales[getSalesDate()].totalSales | currency }}</h4> -->
  <!-- <span class="smallFont">{{$storage.sales[getSalesDate()].totalSales / $storage.dailyHardGoal * 100| number:0 }}% of goal achieved</span> <br> -->
  <span class="smallFont">{{$storage.sales[$storage.salesDate].totalSales / $storage.goals[$storage.salesDate].value * 100| number:0 }}% of goal achieved</span> <br>
  <br>
  <a data-toggle="modal" data-target="#myModal"><span class="smallFont" style="color:deepskyblue">Adjust goal</span></a>
</div>

  <table class="dividerTable smallFont">  
    <thead>
      <tr class="tableEmployeeStat">
        <th>Category</th>
        <th>Sales</th>
        <th>Tickets</th>
        <th>% of Total Sales</th>
      </tr>
    </thead>
    <tbody>
      <tr class="tableEmployeeStat" ng-repeat="category in $storage.sales[$storage.salesDate].categories">
        <td>{{category.name}}</td>
        <td>${{category.sales}}</td>
        <td>{{category.count}}</td>
        <td>{{ (category.sales / $storage.sales[$storage.salesDate].totalSales) * 100 | number:0}}%</td>
      </tr>
  
    </tbody>
  </table>
  <br>
  
  
<button class="smallRoundButton grayBKG" ng-click="loadSalesData(true)">Refresh Data</button>


<!-- Insights -->
<div class="tactics">
<br>
  <div class="center">
    <span class="smallFont"><b>Thought of the Day</b></span>
    <br>
    <br>
    <div class="boxed ">
      <span class="smallFont">{{$storage.fullTactics.tactics[0].tips.thoughtOfTheDay}}</span>
    </div>
  </div> <!-- End Insights -->
<br>
</div>

<!-- Modal -->
<div id="myModal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header headerBKG">
        <h4 class="modal-title center xlargeFont" style="color:white">Current Goal: {{$storage.goals[$scope.$storage.salesDate].value}}</h4>
      </div>
      
      <div class="modal-body center">
      <span class="largeFont center">New Goal</span>
      <br>
        <input type="number" id="salesGoalInput" />
        <!-- <input type="range" min="{{$storage.dailyHardGoal-300}}" max="{{$storage.dailyHardGoal+300}}" id="weeklyGoalRange" ng-model="$storage.dailyHardGoal" />
        <input type="number" id="weeklyGoalInput" ng-if="section == 0" ng-model="$storage.dailyHardGoal" /> -->
      </div>
      <div class="modal-footer headerBKG">
        <button type="button" class="btn btn-default" ng-click="callUpdateGoals()">Update</button>
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>

