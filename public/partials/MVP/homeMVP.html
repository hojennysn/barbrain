<script>
$( "Goal" ).click(function() {
      $( "Display" ).toggle( {
        
      });
    $(this).text(function(i, text){
    return text === "Edit Goal" ? "Change Goal" : "Edit Goal";
    })
});
</script>

<div>
  <div class="noHeight" ng-include src="'partials/navbar.html'"></div>

  <header class="progressHeader">
    <h5 class="location-name">{{ $storage.locationData.name }}</h5>
    <h3 class="screen-heading">Current Incentive</h3>
    <span class="xlargeFont screen-heading">{{dateRange}}</span>
  </header>

  <div ng-if="loading" ng-include="'partials/loading.html'"></div>

  <h4 class="center">{{ $storage.weekToDate.groups[$storage.incentive.id].count }} / {{ $storage.weeklyIncentiveGoal }}</h4>

  <!--set different graphs to display-->
  <div class="chartHolder smallDoughnut">
  <!-- <canvas id="myChart" width="200" height="200"></canvas> -->
  <canvas ng-if="$storage.weeklyIncentiveGoal - $storage.weekToDate.groups[$storage.incentive.id].count > 0" id="doughnut" class="chart chart-doughnut"
    chart-data="[$storage.weekToDate.groups[$storage.incentive.id].count, $storage.weeklyIncentiveGoal - $storage.weekToDate.groups[$storage.incentive.id].count]"  chart-labels="['Period Total Sales', 'Difference From Goal']" chart-options="options">
  </canvas> 
  <canvas ng-if="$storage.weeklyIncentiveGoal - $storage.weekToDate.groups[$storage.incentive.id].count <= 0" id="doughnut" class="chart chart-doughnut"
    chart-data="[$storage.weekToDate.groups[$storage.incentive.id].count, $storage.weekToDate.groups[$storage.incentive.id].count - $storage.weeklyIncentiveGoal ]"  chart-labels="['Period Total Sales', 'Amount Exceeding Goal']" chart-options="options">
  </canvas> 
</div>
  
  

  <div class="center">
  <span>{{ $storage.weekToDate.groups[$storage.incentive.id].count / $storage.weeklyIncentiveGoal * 100 | number:0 }}%</span>
  <br>
  <span class="smallFont">of this week's {{$storage.incentive.name}} goal achieved</span>
  <br>
  <a data-toggle="modal" data-target="#myModal"><span class="smallFont" style="color:deepskyblue">Adjust goal</span></a>
  </div>
  <br>

  <table class="dividerTable" ng-init="section = 0;getDateRange(0)">
    <tr class="smallFont bottomLine">
    <th ng-class="{'selected': section === 0}" ng-click="setSalesDate('TODAY'); getDateRange(0); section = 0">Today</th>
    <th ng-class="{'selected': section === 1}" ng-click="setSalesDate('YESTERDAY'); getDateRange(1); section = 1">Yesterday</th>
    <th ng-class="{'selected': section === 2}" ng-click="setSalesDate('LASTWEEK'); getDateRange(2); section = 2">Last Week</th>
     <!--  <th class="centeredPaddedCell" ng-class="{'selected': section === 0}" ng-click="section = 0">Today</th>
      <th class="centeredPaddedCell" ng-class="{'selected': section === 1}" ng-click="section = 1">Yesterday</th>
      <th class="centeredPaddedCell" ng-class="{'selected': section === 2}" ng-click="section = 2">Last Week</th> -->
    </tr>
  </table>

  <div>
    <table class="dividerTable grayBKG centeredPaddedCell">
    <tr class="center">
      <th class="smallFont">Units Sold</th>
      <th class="smallFont">Sales</th>
    </tr>
    <tr class="center">
      <td class="mediumFont" ng-init="callGetGoals()">{{ $storage.sales[$storage.salesDate].groups[$storage.incentive.id].count}}</td>
      <td class="mediumFont">{{ $storage.sales[$storage.salesDate].groups[$storage.incentive.id].sales | currency:undefined:0 }}</td>
    </tr>
  </table>

  </div>

  <!-- <div ng-if="section==0" ng-include src="'partials/MVP/incentiveDaily.html'" class="full"></div>
  <div ng-if="section==1" ng-include src="'partials/MVP/incentiveYesterday.html'" class="full"></div>
  <div ng-if="section==2" ng-include src="'partials/MVP/incentiveWeekly.html'" class="full"></div> -->

</div>

<div ng-include src="'partials/MVP/dailyStaffIncentive.html'"></div>

<!-- Modal -->
<div id="myModal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Adjust This Week's Goal</h4>
      </div>
      <div class="modal-body center">
        <!-- <input type="range" min="{{$storage.dailyHardIncentiveGoal-300}}" max="{{$storage.dailyHardIncentiveGoal+300}}" id="weeklyGoalRange" ng-model="$storage.dailyHardIncentiveGoal" /> -->
        <input type="number" ng-model="$storage.weeklyIncentiveGoal" />
        <select class="smallRoundButton" ng-model="$storage.incentive" ng-options="x.name for x in $storage.menugroups | orderBy:'toString()'">
        </select>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" ng-click="updateIncentive()">Update</button>
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>
    <!-- END EDIT CONTENT -->
